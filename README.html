<html><head><title>Dist::Zilla::Plugin::PrereqsClean</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.20,
  using Pod::Simple::PullParser v3.20,
  under Perl v5.016000 at Tue Jul 24 20:24:02 2012 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u'
name="NAME"
>NAME</a></h1>

<p>Dist::Zilla::Plugin::PrereqsClean - Automatically cleans up the mess from other Prereq modules</p>

<h1><a class='u'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    ; ...other Prereq plugins...
    ; (NOTE: Order is important, so PrereqsClean should go last.)
    [PrereqsClean]
    ; defaults
    minimum_perl = {{Runtime Requires for Perl}} || v5.8.8
    removal_level = 2</pre>

<h1><a class='u'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>Ever notice that it&#39;s really easy to figure out if a module&#39;s author used Dist::Zilla by the amount of dependencies? strict? warnings? base? Every module for Foo::Bar::*, individually listed?</p>

<p>Well, now you can clean up that junk. PrereqsClean will find and clean up:</p>

<ul>
<li>Core modules that are already in Perl, verifying minimum version requirements</li>

<li>Core modules that <b>only</b> exist in Perl, which will elevate the minimum Perl version if necessary</li>

<li>Multiple modules that already exist in a single distribution</li>
</ul>

<h2><a class='u'
name="Why_bother?"
>Why bother?</a></h2>

<p>Why even worry about the dependency list?</p>

<ol>
<li>Your list of dependencies should give users a general idea of how many <b>distributions</b> they need to download from CPAN. Bulking up the dependencies with every single little module scares away certain users into thinking your module is just too complex to worry about.</li>

<li>The core module search alone will aid you in setting the most accurate minimum Perl version.</li>

<li>It&#39;s just silly to add in stuff like <code>strict</code> and <code>warnings</code> as dependencies, when they have literally been a part of the Perl language since Day 1.</li>
</ol>

<p>For the flip side, see <a href="#CAVEATS" class="podlinkpod"
>&#34;CAVEATS&#34;</a>.</p>

<h1><a class='u'
name="OPTIONS"
>OPTIONS</a></h1>

<h2><a class='u'
name="minimum_perl"
>minimum_perl</a></h2>

<p>This is the bare minimum version of Perl you want to start off with. Some people already have a minimum in their code, which it will use by default. Otherwise, you can override here, instead of inside the modules.</p>

<p>The &#34;last resort&#34; default is v5.8.8, which is the minimum version of Perl that included <a href="http://search.cpan.org/perldoc?EUMM" class="podlinkpod"
>ExtUtils::MakeMaker</a>.</p>

<h2><a class='u'
name="removal_level"
>removal_level</a></h2>

<p>This dictates just how zealous this module should remove dependencies from the list. The default (level 2) should work fine for most people.</p>

<ul>
<li><b>Level 0</b> = This is the completely safe and boring option. It won&#39;t actually remove anything unless the module exists <b>only</b> in Perl, which dependencies wouldn&#39;t have fixed anyway. It will also elevate your minimum Perl version from that discovery, and warn you of deprecated/removed modules from core Perl.</li>

<li><b>Level 1</b> = This is the &#34;core only&#34; removal level, which adds support to remove &#34;dual-life&#34; (CPAN+Perl) core modules, if the minimum version is covered in the existing version of Perl.</li>

<li><b>Level 2</b> = This is the default removal level, which will condense multiple modules into a single distribution requirement.</li>

<li><b>Level 3</b> = This level will remove the &#34;split protection&#34; safeguards that allow it to only remove multiple modules if they fall into the same parent namespace. (For example, split protection would remove all of the <code>Foo::Bar::\*</code> modules as one <code>Foo::Bar</code> requirement, and the <code>Blah::\*</code> modules as a <code>Blah</code> requirement, even if all of those modules are in the same distribution.)</li>
</ul>

<h1><a class='u'
name="CAVEATS"
>CAVEATS</a></h1>

<h2><a class='u'
name="Core_module_deprecation"
>Core module deprecation</a></h2>

<p><b>Situation:</b> Once in a blue moon, the Perl folks will decide that a module is either too old, too broken, or too obscure to keep into core. Once that happens, there is a deprecation process. First, the module is marked as deprecated for an entire major release cycle (<code>5.##.\*</code>). If it was in the middle of a cycle, it will likely last another full cycle.</p>

<p>Finally, the module is removed from core. In many cases, the module isn&#39;t even available on CPAN, since the whole thing has been retired.</p>

<p><b>Problem:</b> If PrereqsClean removed the module and if you haven&#39;t had a release in a large span of time (missing the entire deprecation cycle), then users might experience missing dependencies for newer versions of Perl.</p>

<p><b>Risk:</b> As of the time of this writing, out of the 773 modules that have ever been in Perl core, 32 modules or module sets (93 indiv modules) have been removed from core, 10 of which were removed during a massive cleanup during the 5.8/9 cycle.</p>

<p>Given that you&#39;re using something as modern as <a href="http://search.cpan.org/perldoc?Dist%3A%3AZilla" class="podlinkpod"
>Dist::Zilla</a>, you&#39;re probably not depending on modules that are 10 years old. And you&#39;re probably releasing often enough that you&#39;ll run into the built-in deprecation warning before it gets removed.</p>

<p><b>Solution:</b> If the module is still in CPAN, re-release your distro. Problem solved.</p>

<p>If not, you&#39;re pretty much SOL, anyway. Switch to a different module.</p>

<h2><a class='u'
name="Distribution_split"
>Distribution split</a></h2>

<p><b>Situation:</b> An author of a large distribution has decided that some of the modules are better off split up into another (or more) distro.</p>

<p><b>Problem:</b> If PrereqsClean removed the module from the split, then users might experience missing dependencies. However, the chances are high that the distro author is now including the split modules in their dependency list, so CPAN will install it correctly, anyway.</p>

<p><b>Risk:</b> This is a very rare event, but it does happen to major modules. For example, GAAS had split off all of the non-LWP modules from <a href="http://search.cpan.org/perldoc?libwww-perl" class="podlinkpod"
>libwww-perl</a> for his 6.0 release. However, again, he also included dependency links back to those modules, so CPAN would have installed it correctly. Plus, it was a logical namespace split, so PrereqsClean&#39;s &#34;split protection&#34; would have already safeguarded against any problems.</p>

<p>So, the odds of this causing any problems are very, very low.</p>

<p><b>Solution:</b> Again, <code>dzil release</code>. Problem solved.</p>

<h2><a class='u'
name="TL;DR"
>TL;DR</a></h2>

<p>If any of this is too scary for you, just set the removal_level to 0.</p>

<h1><a class='u'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p>Other Dist::Zilla Prereq plugins: <a href="http://search.cpan.org/perldoc?Prereqs" class="podlinkpod"
>Dist::Zilla::Plugin::Prereqs</a>, <a href="http://search.cpan.org/perldoc?AutoPrereqs" class="podlinkpod"
>Dist::Zilla::Plugin::AutoPrereqs</a>, <a href="http://search.cpan.org/perldoc?LatestPrereqs" class="podlinkpod"
>Dist::Zilla::Plugin::LatestPrereqs</a>, <a href="http://search.cpan.org/perldoc?DarkPAN" class="podlinkpod"
>Dist::Zilla::Plugin::DarkPAN</a></p>

<h1><a class='u'
name="AVAILABILITY"
>AVAILABILITY</a></h1>

<p>The project homepage is <a href="https://github.com/SineSwiper/Dist-Zilla-PluginBundle-Prereqs/wiki" class="podlinkurl"
>https://github.com/SineSwiper/Dist-Zilla-PluginBundle-Prereqs/wiki</a>.</p>

<p>The latest version of this module is available from the Comprehensive Perl Archive Network (CPAN). Visit <a href="http://www.perl.com/CPAN/" class="podlinkurl"
>http://www.perl.com/CPAN/</a> to find a CPAN site near you, or see <a href="https://metacpan.org/module/Dist::Zilla::Plugin::PrereqsClean/" class="podlinkurl"
>https://metacpan.org/module/Dist::Zilla::Plugin::PrereqsClean/</a>.</p>

<h1><a class='u'
name="SUPPORT"
>SUPPORT</a></h1>

<h2><a class='u'
name="Internet_Relay_Chat"
>Internet Relay Chat</a></h2>

<p>You can get live help by using IRC ( Internet Relay Chat ). If you don&#39;t know what IRC is, please read this excellent guide: <a href="http://en.wikipedia.org/wiki/Internet_Relay_Chat" class="podlinkurl"
>http://en.wikipedia.org/wiki/Internet_Relay_Chat</a>. Please be courteous and patient when talking to us, as we might be busy or sleeping! You can join those networks/channels and get help:</p>

<ul>
<li>irc.perl.org
<p>You can connect to the server at &#39;irc.perl.org&#39; and join this channel: #distzilla then talk to this person for help: SineSwiper.</p>
</li>
</ul>

<h2><a class='u'
name="Bugs_/_Feature_Requests"
>Bugs / Feature Requests</a></h2>

<p>Please report any bugs or feature requests via <a href="http://search.cpan.org/perldoc?GitHub" class="podlinkpod"
><a href="https://github.com/SineSwiper/Dist-Zilla-PluginBundle-Prereqs/issues" class="podlinkurl"
>https://github.com/SineSwiper/Dist-Zilla-PluginBundle-Prereqs/issues</a></a>.</p>

<h1><a class='u'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Brendan Byrd &#60;BBYRD@CPAN.org&#62;</p>

<h1><a class='u'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>This software is Copyright (c) 2012 by Brendan Byrd.</p>

<p>This is free software, licensed under:</p>

<pre>  The Artistic License 2.0 (GPL Compatible)</pre>

<!-- end doc -->

</body></html>
