language: perl
perl:
   - "5.16"
   - "5.14"
   - "5.12"
   - "5.10"

install:
   # Deal with all of the DZIL dependancies, quickly and quietly
   - cpanm --quiet --notest Dist::Zilla
   - dzil authordeps | cpanm --quiet --notest

   # Install the lowest possible required version for the dependencies
   - export OLD_CPANM_OPT=$PERL_CPANM_OPT
   - export PERL_CPANM_OPT='--mirror http://cpan.metacpan.org/ --mirror http://search.cpan.org/CPAN '$PERL_CPANM_OPT
   - cpanm BBYRD/Dist-Zilla-Role-MetaCPANInterfacer-0.90.tar.gz
   - cpanm BBYRD/Dist-Zilla-Role-PluginBundle-Merged-0.90.tar.gz
   - cpanm RJBS/Dist-Zilla-2.100880.tar.gz
   - cpanm DROLSKY/List-AllUtils-0.01.tar.gz
   - cpanm BINGOS/Module-CoreList-2.69.tar.gz
   - cpanm STEVAN/Moose-0.01.tar.gz
   - cpanm PHAYLON/MooseX-Types-0.01.tar.gz
   - cpanm BBYRD/sanity-0.91.tar.gz
   - cpanm RJBS/Dist-Zilla-4.200002.tar.gz
   - cpanm OVID/Test-Most-0.01.tar.gz
   - cpanm ADAMK/YAML-Tiny-0.01.tar.gz
   - export PERL_CPANM_OPT=$OLD_CPANM_OPT
script:
   - dzil smoke --release --author
notifications:
   irc:
      - "irc.perl.org#distzilla"
